<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <title>How does it work?</title>

  <link rel="stylesheet" href="dist/reset.css">
  <link rel="stylesheet" href="dist/reveal.css">
  <link rel="stylesheet" href="dist/theme/night.css">
  <link rel="stylesheet" href="css/custom.css">
  <link rel="stylesheet" href="plugin/highlight/monokai.css">
</head>

<body>
<div class="reveal">

  <!-- 45 mins slides + 10-15 mins QA, 22-24 slides total -->

  <div class="slides">
    <section data-background-image="img/hal-2001.jpg" data-background-opacity="0.6">
      <h1>Computer</h1>
      <h2>How does it work?</h2>
      <h4>from microcomputer to microcontroller</h4>
      <div class="signature">Maciej Małecki, Capgemini IoT Community, Wrocław 2021.</div>
    </section>

    <section>
      <h2 class="r-fit-text">is this presentation</h2>
      <h2 class="r-fit-text">for me?</h2>
    </section>

    <section>
      <div>
        <img src="img/overview.png" alt="Overview">
      </div>
    </section>

    <section>
      <h3>"microcomputer" ???</h3>
      <div class="r-vstack">
        <div class="r-hstack">
          <img src="img/960px-IBM_System360_Mainframe.jpg" alt="Mainframe" style="height: 220px;" class="fragment">
          <img src="img/pdp-8.jpg" alt="PDP-8 Minicomputer" style="height: 220px;" class="fragment">
        </div>
        <img src="img/1280px-Trinity77.jpg" alt="Trinity 77" style="height: 220px;" class="fragment">
      </div>
      <div class="fragment">
        ~$2.000.000, ~$20.000, ~$1.000
      </div>
      <span class="source">
        <ol>
          <li><a href="https://commons.wikimedia.org/wiki/File:IBM_System360_Mainframe.jpg">https://commons.wikimedia.org/wiki/File:IBM_System360_Mainframe.jpg</a></li>
          <li>By Daderot - Own work, CC0, <a href="https://commons.wikimedia.org/w/index.php?curid=42413452">https://commons.wikimedia.org/w/index.php?curid=42413452</a></li>
          <li>By Tim Colegrove - Own work, CC BY-SA 4.0, <a href="https://commons.wikimedia.org/w/index.php?curid=79216985">https://commons.wikimedia.org/w/index.php?curid=79216985</a></li>
        </ol>
      </span>
    </section>

    <section>
      <h3>KIM-1, Apple I; 1976</h3>
      <div class="r-hstack">
        <img src="img/kim-1-pcb.jpg" alt="KIM-1" class="h-norm">
        <img src="img/1252px-CopsonApple1_2k_cropped.jpg" alt="Apple I" class="h-norm">
      </div>
      <span class="source">
        <ol>
          <li>By MOS_KIM-1_IMG_4211.jpg: Rama &amp; Musée Bolore-framing: Tomer T (talk)scale: Rama - This file has been extracted from another file: MOS KIM-1 IMG 4211.jpg, CC BY-SA 2.0 fr, <a href="https://commons.wikimedia.org/w/index.php?curid=18666108">Link</a></li>
          <li>By Achim Baqué - https://www.apple1registry.com/en/press.html, CC BY-SA 4.0, <a href="https://commons.wikimedia.org/w/index.php?curid=109364693">Link</a></li>
        </ol>
      </span>
    </section>

    <section>
      <h3>microprocessor</h3>
      <p>early Intel</p>
      <div class="r-hstack h-small">
        <img src="img/Intel_4004.jpg" alt="Intel 4004">
        <img src="img/KL_Intel_C8008-1.jpg" alt="Intel 8008">
        <img src="img/1280px-KL_Intel_i8080_Black_Background.jpg" alt="Intel 8080">
      </div>
      <span class="source">
        <ol>
          <li>By Original uploader was LucaDetomi at it.wikipedia - Transfered from it.wikipedia, CC BY-SA 3.0, <a href="https://commons.wikimedia.org/w/index.php?curid=858670">Link</a></li>
          <li>By Konstantin Lanzet - CPU Collection Konstantin LanzetCamera: Canon EOS 400D, <a href="https://creativecommons.org/licenses/by-sa/4.0" title="Creative Commons Attribution-Share Alike 4.0">CC BY-SA 4.0</a>, <a href="https://commons.wikimedia.org/w/index.php?curid=5694177">Link</a></li>
          <li>By Konstantin Lanzet - CPU collectionCamera: Canon EOS 400D, <a href="http://creativecommons.org/licenses/by-sa/3.0/" title="Creative Commons Attribution-Share Alike 3.0">CC BY-SA 3.0</a>, <a href="https://commons.wikimedia.org/w/index.php?curid=7028099">Link</a></li>
        </ol>
      </span>
    </section>

    <section>
      <h3>Altair 8800</h3>
      <p>MITS, 1975</p>
      <div class="r-hstack">
        <img src="img/798px-Altair_8800_Computer.jpg" alt="Altair 8800" class="h-norm">
        <img src="img/bill-gates.jpeg" alt="Bill" class="fragment h-norm">
      </div>
      <span class="source">
          <ol>
            <li>
              By Swtpc6800 en:User:Swtpc6800 Michael Holley - Transfered from en.wikipedia, Public Domain, <a href="https://commons.wikimedia.org/w/index.php?curid=3185062">https://commons.wikimedia.org/w/index.php?curid=3185062</a>
            </li>
            <li>
              <a href="https://www.tempton.de/next-level/blog/bill-gates-der-moment-wenn-microsoft-die-kleinste-sorge-ist">https://www.tempton.de/next-level/blog/bill-gates-der-moment-wenn-microsoft-die-kleinste-sorge-ist</a>
            </li>
          </ol>
      </span>
    </section>

    <section>
        <img src="img/altair-8800-front-panel-1.jpg" alt="Altair front panel">
        <p>
          <a href="https://s2js.com/altair/sim.html">https://s2js.com/altair/sim.html</a>
        </p>
        <span class="source">
          <p><a href="https://bobyewchuk.wordpress.com/2015/01/06/altair-8800/">https://bobyewchuk.wordpress.com/2015/01/06/altair-8800/</a> </p>
        </span>
    </section>

    <section>
      <h3>Altair BASIC</h3>
      <div>
        <img src="img/960px-Altair_BASIC_Paper_Tape.jpg" alt="Altair BASIC" class="h-norm">
      </div>
      <span class="source">
        <p>By User:Swtpc6800 Swtpc6800 Michael Holley - Own work, Public Domain, <a href="https://commons.wikimedia.org/w/index.php?curid=2649301">https://commons.wikimedia.org/w/index.php?curid=2649301</a></p>
      </span>
    </section>

    <section>
      <h3>von Neumann</h3>
      <div>
        <img src="img/von-neumann.png" alt="von Neumann" class="dark-bg h-high">
      </div>
    </section>

    <section>
      <h3>Harvard</h3>
      <div>
        <img src="img/harvard.png" alt="Harvard" class="dark-bg h-high">
      </div>
    </section>

    <section>
      <h3>Intel 8088/8086</h3>
      <div class="h-norm white-bg"> 
        <img src="img/block-diagram-of-intel-8086.png" alt="8086">
      </div>
      <span class="source">
        <p><a href="https://www.daenotes.com/electronics/digital-electronics/8086-8088-microprocessor">Link</a></p>
      </span>
    </section>

    <section>
      <h3>MOS Technology 6502</h3>
      <div class="r-hstack white-bg">
        <img src="img/6502CPU.gif" alt="6502 Pinout" class="h-high">
        <img src="img/6502Chip.gif" alt="6502" class="h-high">
      </div>
      <span class="source">
        <p><a href="https://hackaday.io/project/21496-fpga-nes/log/58495-cpu-overview">Link</a></p>
      </span>
    </section>

    <section>
      <h3>Atmel AVR</h3>
      <div>
        <img src="img/AVR_Architecture.GIF" alt="AVR">
      </div>
      <span class="source">
        <p><a href="http://exploreembedded.com/wiki/File:AVR_Architecture.GIF">http://exploreembedded.com/wiki/File:AVR_Architecture.GIF</a></p>
      </span>
    </section>

    <section>
      <h3>Microcontroller vs microprocessor</h3>
      <div class="r-hstack white-bg">
        <img src="img/atmega-328.png" alt="328" class="h-norm">
        <img src="img/6502CPU.gif" alt="6502" class="h-norm">
        <img src="img/CIA_6526_-_Pinbelegung.png" alt="6526" class="h-norm">
      </div>
      <span class="source">
        <ol>
          <li><a href="https://projectiot123.com/2019/10/24/atmega328-pinout-for-arduino/">Link</a></li>
          <li><a href="https://www.c64-wiki.com/wiki/CIA">Link</a></li>
        </ol>
      </span>
    </section>

    <!-- #7 -->
    <section>
      <h3>8bits, 16bits, 64bits</h3>
      <p>Data bus width</p>
      <div class="r-hstack">
        <img src="img/c64-cpu.png" alt="C64 data bus" class="h-norm">
        <img src="img/Wyprowadzenie_mikroprocesora_8086.JPG" alt="8086" class="h-norm fragment">
        <img src="img/8088.gif" alt="8088" class="h-norm fragment">
      </div>
      <span class="source">
        <ol>
          <li><a href="https://ist.uwaterloo.ca/~schepers/MJK/c64__.html">Link</a></li>
          <li>Autorstwa Nieznany - Dokumentacja mikroprocesora Intel 8086, Domena publiczna, <a href="https://commons.wikimedia.org/w/index.php?curid=7895244">Link</a></li>
          <li><a href="https://www.datasheet-pdf.info/entry/8088">Link</a></li>
        </ol>
      </span>
    </section>

    <section>
      <h3>Intel 8088</h3>
      <h4>16-bits internally/8-bit data bus</h4>
      <div class="h-norm white-bg">
        <img src="img/8088-schematics.gif" alt="8088">
      </div>
      <span class="source">
        <p><a href="https://deeprajbhujel.blogspot.com/2015/12/introduction-to-8088-microprocessor-and.html">Link</a></p>
      </span>
    </section>

    <section>
      <h3>MOS 6502 (Apple ][ )</h3>
      <h4>8-bits externally/internally</h4>
      <div class="h-high">
        <img src="img/6502Chip.gif" alt="6502">
      </div>
      <span class="source">
        <p><a href="https://www.chessprogramming.org/6502">https://www.chessprogramming.org/6502</a></p>
      </span>
    </section>

    <section>
      <div class="r-hstack">
        <div class="r-vstack w-norm">
          <img src="img/c64-front.JPG" alt="c64 front" class="w-norm">
          <img src="img/c64-back.JPG" alt="c64 back" class="w-norm">
        </div>
        <img src="img/6510.gif" alt="6510" style="width: 200px;" class="white-bg">
      </div>
  </section>

    <section>
      <h3>How to access the RAM?</h3>
      <div class="r-hstack">
        <div class="h-norm">
          <img src="img/read-cycle.png" alt="Read">
        </div>
          <div class="h-norm fragment">
          <img src="img/write-cycle.png" alt="Write">
        </div>  
      </div>
    </section>

    <section>
      <div class="r-hstack white-bg h-high">
        <img src="img/6510_CPU_Pinout.svg" alt="6510">
        <img src="img/VIC-II.svg" alt="VIC 2">
      </div>
      <span class="source">
        <ol>
          <li>By Crotalus horridus at the English-language Wikipedia, CC BY-SA 3.0, https://commons.wikimedia.org/w/index.php?curid=2367420</li>
          <li>By Bill Bertram - Own work, CC BY 2.5, https://commons.wikimedia.org/w/index.php?curid=473295</li>
        </ol>
      </span>
    </section>

    <section>
      <h2>Machine code</h2>
      <p>
        <code>169 0 141 32 208 169 1 141 32 208 76 0 192</code>
      </p>

      <h3 class="fragment">Syntax & Semantic</h3>
      <div class="r-hstack tiles">
        <div class="fragment">
          <pre>
169   0
141  32 208
169   1
141  32 208
76    0 192</pre>
        </div>
        <div class="fragment">
          <pre>
$A9 $00
$8D $20 $D0
$A9 $01
$8D $20 $D0
$4C $00 $C0</pre>
        </div>
        <div class="fragment">
          <pre>
$C000 LDA #$00
$C002 STA $D020
$C005 LDA #$01
$C007 STA $D020
$C00A JMP $C000</pre>
        </div>
        <div class="fragment">
          <pre>
loop: LDA #$00
      STA $D020
      LDA #$01
      STA $D020
      JMP loop</pre>
        </div>
      </div>
    </section>

    <section>
      <h3>Instruction set (MOS 6502)</h3>
      <pre class="small-code">
ADC   Add Memory to Accumulator with Carry              LDA   Load Accumulator with Memory
AND   &quot;AND&quot; Memory with Accumulator                     LDX   Load Index X with Memory
ASL   Shift Left One Bit (Memory or Accumulator)        LDY   Load Index Y with Memory
                                                        LSR   Shift Right One Bit (Memory or Accumulator)
BCC   Branch on Carry Clear
BCS   Branch on Carry Set                               NOP   No Operation
BEQ   Branch on Result Zero
BIT   Test Bits in Memory with Accumulator              ORA   &quot;OR&quot; Memory with Accumulator
BMI   Branch on Result Minus
BNE   Branch on Result not Zero                         PHA   Push Accumulator on Stack
BPL   Branch on Result Plus                             PHP   Push Processor Status on Stack
BRK   Force Break                                       PLA   Pull Accumulator from Stack
BVC   Branch on Overflow Clear                          PLP   Pull Processor Status from Stack
BVS   Branch on Overflow Set
                                                        ROL   Rotate One Bit Left (Memory or Accumulator)
CLC   Clear Carry Flag                                  ROR   Rotate One Bit Right (Memory or Accumulator)
CLD   Clear Decimal Mode                                RTI   Return from Interrupt
CLI   Clear interrupt Disable Bit                       RTS   Return from Subroutine
CLV   Clear Overflow Flag
CMP   Compare Memory and Accumulator                    SBC   Subtract Memory from Accumulator with Borrow
CPX   Compare Memory and Index X                        SEC   Set Carry Flag
CPY   Compare Memory and Index Y                        SED   Set Decimal Mode
                                                        SEI   Set Interrupt Disable Status
DEC   Decrement Memory by One                           STA   Store Accumulator in Memory
DEX   Decrement Index X by One                          STX   Store Index X in Memory
DEY   Decrement Index Y by One                          STY   Store Index Y in Memory

INC   Increment Memory by One                           TAX   Transfer Accumulator to Index X
INX   Increment Index X by One                          TAY   Transfer Accumulator to Index Y
INY   Increment Index Y by One                          TSX   Transfer Stack Pointer to Index X
                                                        TXA   Transfer Index X to Accumulator
JMP   Jump to New Location                              TXS   Transfer Index X to Stack Pointer
JSR   Jump to New Location Saving Return Address        TYA   Transfer Index Y to Accumulator
      </pre>
    </section>

    <section>
      <h3>AVR instruction set</h3>
      <div class="tiles r-hstack">
        <pre class="small-code">
Arithmetic

ADD   Rd, Rr
ADC   Rd, Rr
ADIW  Rp+1:Rp, K6

SUB   Rd, Rr
SUBI  Rdh, K8
SBC   Rd, Rr
SBCI  Rdh, K8
SBIW  Rp+1:Rp, K6

INC   Rd
DEC   Rd

AND   Rd, Rr
ANDI  Rdh, K8
OR    Rd, Rr
ORI   Rdh, K8
COM   Rd
NEG   Rd
CP    Rd, Rr
CPC   Rd, Rr
CPI   Rdh, K8
SWAP  Rd
LSR   Rd
ROR   Rd
ASR   Rd

MUL     Rd, Rr
MULS    Rdh, Rrh
MULSU   Rdq, Rrq
FMUL    Rdq, Rrq
FMULS   Rdq, Rrq
FMULSU  Rdq, Rrq</pre>
      <pre class="small-code">
Bit and others

BSET  s
BCLR  s
SBI   IO5, b
CBI   IO5, b
BST   Rd, b
BLD   Rd, b

NOP
BREAK
SLEEP
WDR</pre>
<pre class="small-code">
Transfer

MOV  Rd, Rr
MOVW Rd+1:Rd, Rr+1:Rr

IN    Rd, IO6
OUT   IO6, Rr

PUSH  Rr
POP   Rr

LDI   Rdh, K8
LDS   Rd, D16

LD    Rd, X
LDD   Rd, YZ+K6
LD    Rd, -XYZ
LD    Rd, XYZ+

STS   D16, Rr

ST    X, Rr
STD   YZ+K6, Rr
ST    -XYZ, Rr
ST    XYZ+, Rr

LPM
LPM   Rd, Z
LPM   Rd, Z+
ELPM
ELPM  Rd, Z
ELPM  Rd, Z+

SPM</pre>
<pre class="small-code">
Jump

RJMP  S12
IJMP
EIJMP
JMP   P22</pre>
<pre class="small-code">
Branch

CPSE  Rd, Rr

SBRC  Rr, b
SBRS  Rr, b

SBIC  IO5, b
SBIS  IO5, b

BRBC  s, S7
BRBS  s, S7</pre>
<pre class="small-code">
Call

RCALL   S12
ICALL
EICALL
CALL      P22

RET
RETI</pre>
    </div>
  </section>

  <section data-background-image="img/intel-8086-instructions.png">
  </section>

  <section>
    <h3>Addressing modes (6502)</h3>
    <div class="r-hstack">
      <div class="mid-code">
        <ul>
          <li><code>LDA #$20</code> - immediate</li>
          <li><code>LDA $20</code> - absolute zero page</li>
          <li><code>LDA $D020</code> - absolute</li>
          <li><code>LDA $C000, X</code>, <code>LDA $C000, Y</code> - absolute indexed</li>
          <li><code>JMP ($C000)</code> - indirect</li>
          <li><code>LDA ($20,X)</code> - indirect zero page preindexed X</li>
          <li><code>LDA ($20),Y</code> - indirect zere page postindexed Y</li>
        </ul>
      </div>
      <div><pre class="mid-code">
        +----------------+-----------------------+---------+---------+----------+
        | Addressing Mode| Assembly Language Form| OP CODE |No. Bytes|No. Cycles|
        +----------------+-----------------------+---------+---------+----------+
        |  Immediate     |   LDA #$FF            |   $A9   |    2    |    2     |
        |  ZeroPage      |   LDA $FF             |   $A5   |    2    |    3     |
        |  ZeroPage,X    |   LDA $FF,X           |   $B5   |    2    |    4     |
        |  Absolute      |   LDA $FFFF           |   $AD   |    3    |    4     |
        |  Absolute,X    |   LDA $FFFF,X         |   $BD   |    3    |    4*    |
        |  Absolute,Y    |   LDA $FFFF,Y         |   $B9   |    3    |    4*    |
        |  (Indirect,X)  |   LDA ($FF,X)         |   $A1   |    2    |    6     |
        |  (Indirect),Y  |   LDA ($FF),Y         |   $B1   |    2    |    5*    |
        +----------------+-----------------------+---------+---------+----------+</pre>
      </div>
    </div>
  </section>

  <section data-background-image="img/so-logo.jpg">
  </section>

  <section>
    <h3>Stack</h3>
    <h4>based on MOS 6502</h4>
    <div class="r-hstack">
      <div>
          <ul>
            <li><code>PHA</code> - push accumulator (A)</li>
            <li><code>PLA</code> - pull accumulator (A)</li>
            <li><code>PHP</code> - push status (S)</li>
            <li><code>PLP</code> - pull status (S)</li>
            <li><code>JSR $xxxx</code> - jump to subroutine</li>
            <li><code>RET</code> - return from subroutine</li>
            <li><code>RTI</code> - return from interrupt</li>
          </ul>
      </div>
      <div>
        <img src="img/stack.png" alt="Stack" style="width: 350px;">
      </div>
    </div>
  </section>

  <!-- #12, #13 -->
  <section>
    <h3>ALU</h3>
    <div class="r-hstack">
        <div>
          <ul>
            <li><code>ADC $xxxx</code> - add to accumulator with carry</li>
            <li><code>SBC $xxxx</code> - subtract from accumulator with carry</li>
            <li><code>AND $xxxx</code> - bitwise AND</li>
            <li><code>EOR $xxxx</code> - exclusive OR</li>
            <li><code>SLR $xxxx</code> - shift right</li>
          </ul>
        </div>
        <div class="white-bg">
          <img src="img/6502-alu.png" alt="ALU" class="h-high">
        </div>
      </div>
  </section>

  <!-- #17, #18 -->
    <section>
      <h3>Interrupts</h3>
      <div class="white-bg r-hstack">
        <img src="img/atmega-328.png" alt="328">
        <img src="img/6502CPU.gif" alt="6502">
      </div>
    </section>

    <section>
      <h3>Interrupt sources of Commodore 64 (1982)</h3>
      <img src="img/c64-ints.png" alt="C64 Ints">
    </section>

    <!-- LAST -->
    <section>
      <h3>Fragen?</h3>
      <div>
        <img src="img/qr.png" alt="QR">
      </div>
      <a href="https://maciejmalecki.github.io/how-does-it-work">https://maciejmalecki.github.io/how-does-it-work</a>
    </section>

  </div>
</div>

<script src="dist/reveal.js"></script>
<script src="plugin/notes/notes.js"></script>
<script src="plugin/markdown/markdown.js"></script>
<script src="plugin/highlight/highlight.js"></script>
<script src="plugin/zoom/zoom.js"></script>

<script>
    // More info about initialization & config:
    // - https://revealjs.com/initialization/
    // - https://revealjs.com/config/
    Reveal.initialize({
        hash: true,
        navigationMode: 'linear',
        slideNumber: 'c/t',

        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [RevealMarkdown, RevealHighlight, RevealNotes, RevealZoom],
        dependencies: [ { src: "plugin/mouse-pointer/mouse-pointer.js", async: true } ]
    });
</script>
</body>
</html>
